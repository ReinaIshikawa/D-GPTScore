# D-GPTScore
Official implementation of "Human Preference-Aligned Concept Customization Benchmark via Decomposed Evaluation."


# Getting Started

### Installation
```
git clone git@github.com:ReinaIshikawa/D-GPTScore.git
conda env create -f environment.yml
conda activate d-gpt
```

Run the following command in the terminal to use openAPI.
```
echo "export OPENAI_API_KEY='yourkey'" >> ~/.zshrc
source ~/.zshrc
```

### Dataset structure
- 20 images of each person in `CC-AlignBench/man_1, woman_1`
- textprompts in `CC-AlignBench/man_1, woman_1`

### Dataload Example
You can use `data_loader/prompt_loader.py`.

example:
```
python data_loader/prompt_loader.py \
 --csv_path ./CC-AlignBench/data.csv \
 --bg_path ./CC-AlignBench/background.json \
 --man_token "A*" \
 --woman_token "B*" \
 --debug \
 --index_list 46 \
 --prompt_type action+expression \
 --mode easy
```

For the details of options, please check the script.

### paper result
Please down load the images generated by existing generative models.
Curretly, the follwing results are available.

- CustomDiffusion
- OMG(LoRA)
- OMG(InstantID)
- FastComposer
- Mix-of-Show
- DreamBooth

The generation results should be saved under `gen_output/(method name)/output`

```
# python evaluation/metrics/eval_07_gpt_ours.py --gpt_model gpt-4o-mini --part --gen-method (xxx)

python evaluation/analysis/corr_02_ours_ave.py
```
The result will be saved in `results/GPT_ours_ave`



